query Persons {
  allPersons {
    name
    films {
      title
      characters {
        id
        ...PersonFragment
      }
    }
  }
}

fragment PersonFragment on Person {
  birthYear
  isPublished
  name
  hairColor
  height
  homeworld {
    name
    terrain
    surfaceWater
    population
    residents {
      name
    }
  }
}
